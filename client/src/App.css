/* Import Inter font from Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* === Base & Typography === */
body {
  margin: 0;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #1a1d21; /* Slightly softer dark background */
  color: #e0e0e0; /* Lighter grey text for better contrast */
  line-height: 1.6;
}

#root {
  max-width: 960px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

h1 {
  color: #88a4ff; /* Lighter, slightly desaturated blue */
  font-weight: 600;
  margin-bottom: 0.2rem; /* Reduce bottom margin */
  /* Add max-width and center */
  max-width: 600px; 
  margin-left: auto;
  margin-right: auto;
}

/* Style for the subtitle */
h2.subtitle {
  color: #aaa; /* Lighter grey */
  font-size: 1.1em; /* Smaller than h1 */
  font-weight: 400; /* Lighter weight */
  margin-top: -0.3rem; /* Pull up slightly */
  margin-bottom: 1.5rem; /* Restore original bottom margin */
  max-width: 600px; /* Match h1 width */
  margin-left: auto;
  margin-right: auto;
}

h3 {
  color: #61dafb; /* Keep React blue for subheadings */
  margin-bottom: 0.8rem;
  font-weight: 500;
}

strong {
 color: #ffffff; /* Make strong text white for emphasis */
 font-weight: 600; /* Slightly bolder */
}

/* === General Button Styling === */
button {
  font-size: 0.95em; /* Slightly smaller base size */
  padding: 0.7em 1.4em; /* Adjust padding */
  margin: 0.5em;
  cursor: pointer;
  border-radius: 6px; /* Slightly less rounded */
  border: 1px solid #444; /* Visible border */
  font-weight: 500;
  font-family: inherit;
  background-color: #333842; /* Cooler grey button */
  transition: border-color 0.2s, background-color 0.2s, transform 0.1s;
  color: #e0e0e0;
}
button:hover {
  background-color: #404552;
  border-color: #7a8bff; /* Use accent color on hover */
}
button:active {
  transform: scale(0.98); /* Subtle press effect */
}
button:focus,
button:focus-visible {
  outline: 2px solid #7a8bff; /* Thinner outline */
  outline-offset: 2px;
}
button:disabled {
  background-color: #2a2d33;
  border-color: #444;
  color: #777;
  opacity: 0.7;
  cursor: not-allowed;
}

/* === Game Specific Styles === */
.game-container {
  margin-top: 1.5rem;
  /* Removed background-color, padding, border-radius, box-shadow for minimal look */
}

/* Settings Area Styling */
.settings-area {
  margin-bottom: 20px;
  padding: 10px;
  /* background-color: rgba(255, 255, 255, 0.03); */ /* Optional subtle background */
  /* border-radius: 6px; */
}

.settings-area label {
  margin-right: 10px;
  color: #ccc;
}

/* Style the select dropdown */
#k-select {
  font-size: 0.95em;
  padding: 0.5em 1em;
  margin: 0.5em 0; /* Adjust margin */
  cursor: pointer;
  border-radius: 6px; 
  border: 1px solid #444; 
  font-weight: 500;
  font-family: inherit;
  background-color: #333842; /* Match button background */
  color: #e0e0e0; /* Match button text */
  appearance: none; /* Remove default system appearance */
  -webkit-appearance: none;
  -moz-appearance: none;
  /* Add custom dropdown arrow */
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23CCCCCC%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
  background-repeat: no-repeat;
  background-position: right 0.7em top 50%;
  background-size: 0.65em auto;
  padding-right: 2.5em; /* Make space for arrow */
}

#k-select:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.info-button {
  position: absolute;
  top: 20px; /* Adjust position */
  right: 20px;
  z-index: 10;
  background-color: #4a5060; /* Distinct utility button color */
  border: 1px solid #666;
  padding: 0.5em 1em; /* Smaller padding */
  font-size: 0.9em;
}
.info-button:hover {
  background-color: #5a6070;
  border-color: #888;
}

.info-box {
  border: 1px solid #444;
  padding: 20px;
  margin: 25px auto; /* Changed margin to auto for centering */
  background-color: #2c313a; 
  text-align: left;
  border-radius: 8px;
  line-height: 1.7;
  color: #ccc; 
  max-width: 500px; /* Add max-width to match graph-status-info */
  box-sizing: border-box; /* Include padding/border in element's total width/height */
}

.info-box h3 {
  margin-top: 0;
  color: #61dafb;
  border-bottom: 1px solid #444; /* Separator */
  padding-bottom: 0.5rem;
}

.info-box strong {
    color: #e0e0e0;
}

.error-message {
  color: #ff7b7b; /* Slightly softer red */
  margin: 15px 0;
  font-weight: 500; /* Less intense than bold */
  padding: 10px;
  background-color: rgba(255, 100, 100, 0.1);
  border: 1px solid #ff7b7b;
  border-radius: 4px;
}

/* Style for the new status info wrapper above the graph */
.graph-status-info {
  padding: 10px;
  text-align: center; 
  margin-top: 1.5rem; 
  margin-bottom: 1rem; 
  max-width: 500px; /* Existing max-width */
  margin-left: auto;  
  margin-right: auto; 
  box-sizing: border-box; /* Add box-sizing for consistency */
}

.graph-status-info p {
  margin: 0.4rem 0;
  /* REMOVED: text-align: center; (Handled by parent now) */
}

.graph-status-info strong {
  color: #a0c8ff;
  font-weight: 600;
}

.graph-status-info p.moves-info {
  margin: 0.4rem 0 1.2rem 0; /* INCREASED bottom margin */
  text-align: center; 
  font-size: 1.1em; 
  color: #ccc; 
}

.player-move-count {
  font-weight: 700; /* Bold */
  color: #fff; /* White */
}

.optimal-move-count {
  font-weight: 600; /* Semi-bold */
  color: #ffab7a; /* Changed from light blue to match optimal path visualization */
}

.possible-move-count {
  font-weight: 600; /* Semi-bold */
  color: #d4a0ff; /* Using the suggested path color (light purple/violet) */
}

.player-path {
  font-size: 0.9em; 
  color: #999; 
  /* REMOVED: text-align: left; (Inherits center now) */
  /* Keep other styles like margin, word-wrap */
  margin: 10px 0 0 0;
  word-wrap: break-word;
  line-height: 1.5;
  padding-top: 10px;
}

.player-path strong {
    color: #bbb;
    font-weight: 500;
    margin-right: 5px;
}

.options-container {
  margin-top: 0; 
  padding-top: 0;
  text-align: center; 
  max-width: 500px; /* Add max-width */
  margin-left: auto; /* Add centering */
  margin-right: auto; /* Add centering */
  box-sizing: border-box; /* Add box-sizing for consistency */
}

.options-container h3 {
  margin-bottom: 15px;
  font-size: 1.2em;
}

.options-buttons {
  /* Change from flex to grid */
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* Create 3 equal columns */
  /* flex-wrap: wrap; REMOVED */
  justify-content: center; /* Center the grid container if needed, or remove */
  justify-items: center; /* Center items within grid cells */
  align-items: center;   /* Vertically center items */
  gap: 15px; /* Adjust gap as needed for grid */
  margin-bottom: 15px;
  max-width: 500px; /* Add max-width to prevent excessive stretching */
  margin-left: auto;  /* Center the grid block */
  margin-right: auto; /* Center the grid block */
}

.neighbor-button {
  min-width: 110px; /* Slightly larger minimum width */
  border-width: 2px; /* Make border thicker for gradient visibility */
  border-color: transparent; /* Start transparent */
  /* Background color applied inline */
  color: #111; /* Darker text for contrast on light HSL */
  font-weight: 600;
  transition: transform 0.1s ease-out, border-color 0.2s;
}

.neighbor-button:hover {
    transform: translateY(-2px); /* Add slight lift on hover */
    border-color: rgba(255, 255, 255, 0.7); /* Highlight border on hover */
    /* Keep inline background color */
}

.give-up-button {
  margin-top: 20px;
  background-color: #7f1d1d; /* Slightly different dark red */
  border-color: #9f2d2d;
  color: #f0e0e0;
}
.give-up-button:hover {
  background-color: #9f2d2d;
  border-color: #b93b3b;
}

/* === Result Sections (Won/Gave Up) === */
.won-section,
.gave-up-section {
  margin-top: 20px;
  padding: 20px;
  background-color: #2a2d33;
  border-radius: 6px;
  border: 1px solid #3a3f47;
}

.won-section h2 {
  color: #78ff9a; /* Brighter green */
  font-size: 1.6em;
  margin-bottom: 1rem;
}

.gave-up-section h3 {
  color: #ffab7a; /* Match optimal path color */
  margin-top: 0;
  font-size: 1.4em;
  margin-bottom: 1rem;
  text-align: center;
}

.optimal-path {
  /* REMOVED font-style: normal; */
  font-style: italic; /* Added back italic style */
  color: #ffab7a; /* Changed from light blue to match optimal path visualization */
  /* REMOVED background-color: #303848; */
  /* REMOVED padding: 8px 12px; */
  /* REMOVED border-radius: 4px; */
  margin: 10px 0; /* Keep vertical margin */
  /* REMOVED display: inline-block; */
  word-wrap: break-word;
  font-size: 0.95em;
  line-height: 1.5;
}

/* === Path Toggle Section === */
.path-toggle-container {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid #444a54; /* More visible separator */
  text-align: center; /* Center the buttons */
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  align-items: center;
}

.path-toggle-container button {
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 0.85rem;
  background-color: #3a3f47;
  color: #e0e0e0;
  border: 1px solid #555;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* Style for active path buttons */
.path-button-active {
  background-color: #ffab7a !important; /* Match optimal path color */
  color: #282c34 !important; /* Dark text for contrast */
  border-color: #ffab7a !important;
}

.path-toggle-container button:hover:not(:disabled) {
  background-color: #4a5060;
}

.path-toggle-container button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* === Graph Visualization Styling === */
.graph-visualization-container {
  margin: 25px 0;
}

/* Added style for the wrapper div inside GraphVisualization.jsx */
.graph-svg-wrapper {
  /* Add any specific styles for the SVG container div if needed */
  position: relative; /* Example: if needed for tooltips etc. */
}

/* Style for the SVG container itself (assuming one exists in GraphVisualization) */
.graph-visualization svg {
  /* Ensuring border is removed */
  border: none !important;
  background-color: none; /* Explicitly no background */
  border-radius: 8px;
  display: block;
  margin: 0 auto;
  max-width: 100%;
  min-height: 300px; /* Reduced min height slightly? Adjust as needed */
  /* Add cursor style if nodes become interactive */
  /* cursor: pointer; */
}

/* === D3 Graph Element Styles === */

/* Default Link Style */
.graph-link {
  stroke: #555;
  stroke-opacity: 0.6;
  stroke-width: 1.5px; /* Slightly thicker default */
}

/* Player Path Link Style */
.player-path-link {
  stroke: #a0c8ff; /* Match status info strong color */
  stroke-opacity: 0.9;
  stroke-width: 2.5px;
}

/* Optimal Path Link Style */
.optimal-path-link {
  stroke: #ffab7a; /* Match gave up h3 color */
  stroke-opacity: 0.9;
  stroke-width: 2.5px;
  stroke-dasharray: 5, 3; /* Dashed line */
}

/* Suggested Path Link Style */
.suggested-path-link {
  stroke: #d4a0ff; /* Light purple/violet */
  stroke-opacity: 0.9;
  stroke-width: 2.5px;
  stroke-dasharray: 2, 4; /* Different dash/dot pattern */
}

/* Dimmed Link Style (e.g., player path when optimal shown) */
.graph-link.dimmed {
  stroke: #777; /* Dim the stroke color */
  stroke-opacity: 0.5;
}

/* Default Node Style */
.graph-node {
  fill: #61dafb; /* Default: React blue */
  stroke: #1a1d21; /* Match background for contrast */
  stroke-width: 1.5px;
  transition: r 0.3s ease, fill 0.3s ease;
  cursor: pointer; /* Add pointer cursor */
}

/* --- Path Node Styles (Define BEFORE specific types) --- */

/* Nodes on player path */
.graph-node.player-path-node {
    fill: #a0c8ff; /* Lighter blue for path nodes */
}

/* Nodes on optimal path (visible in optimal/both modes) */
.graph-node.optimal-path-node {
    fill: #ffab7a; /* Light salmon for optimal path nodes */
}

/* Nodes on suggested path (visible in suggested mode) */
.graph-node.suggested-path-node {
    fill: #d4a0ff; /* Match suggested link color */
}

/* --- Specific Node Type Styles (Define AFTER path styles) --- */

/* Start Node Style */
.graph-node.start {
  fill: #78ff9a; /* Brighter green (match Won text) */
  r: 7px; /* Make start/end slightly larger */
}

/* End Node Style */
.graph-node.end {
  fill: #ff7b7b; /* Softer red (match Error msg) */
  r: 7px; /* Make start/end slightly larger */
}

/* Current Node Style (when playing) */
.graph-node.current {
  fill: #ffd700; /* Gold */
  r: 8px; /* Make current node largest */
  stroke: #fff; /* White stroke for highlight */
  stroke-width: 2px;
}

/* Current Node Style (when gave up & suggested shown) */
.graph-node.current-gave-up {
  fill: #aa80cc; /* Darker purple? Or keep gold? */
  r: 8px; /* Keep large size */
  stroke: #eee; 
  stroke-width: 1.5px;
}

/* Node Hover Effect (Optional) */
.graph-node:hover {
  /* Example: slightly larger radius or different stroke */
  /* r: 9px; */
  /* stroke: #fff; */
}

/* Label Style */
.graph-label {
  fill: #ffffff; /* Change to white for max visibility */
  font-size: 8px; /* INCREASED FONT SIZE */
  font-family: sans-serif;
  pointer-events: none;
  text-anchor: start;
  dominant-baseline: middle;
}

/* Specific label adjustments if needed */
.graph-node.current + .graph-label { /* Style label for current node */
  /* fill: #fff; */
  /* font-weight: bold; */
}

/* Style for suggested path text in Gave Up section */
.suggested-path-text {
  font-style: italic;
  color: #d4a0ff; /* Match suggested link color */
  margin: 10px 0; /* Keep vertical margin */
  word-wrap: break-word;
  font-size: 0.95em;
  line-height: 1.5;
}

/* Add style for Optimal Path text reference */
.optimal-path-text {
  font-style: italic;
  color: #ffab7a; /* Changed from light blue to match optimal path visualization */
}

/* === Text Color Classes === */
.start-word-text {
  color: #78ff9a; /* Match start node fill */
  font-weight: 600;
}

.end-word-text {
  color: #ff7b7b; /* Match end node fill */
  font-weight: 600;
}

.current-word-text {
  color: #ffd700; /* Match current node fill */
  font-weight: 600;
}

/* Style for highlighted word in path text */
.highlighted-path-word {
  background-color: rgba(255, 255, 255, 0.15); /* Subtle highlight */
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-weight: 700; /* Make highlighted bolder */
}

/* Style for optimal choice words in the player path */
.optimal-choice-word {
  position: relative;
  font-weight: 600;
}

/* Base style for the star indicator */
.optimal-choice-word::after {
  content: "★";
  position: absolute;
  font-size: 10px;
  top: -8px;
  right: -10px;
}

/* Orange star for global optimal path moves (matching optimal path color) */
.global-optimal-choice::after {
  color: #ffab7a; /* Match optimal path color */
}

/* Purple star for local optimal path moves (matching suggested path color) */
.local-optimal-choice::after {
  color: #d4a0ff; /* Match suggested path color */
}

/* Colored stars for the game report */
.global-optimal-star {
  color: #ffab7a; /* Match optimal path color */
}

.local-optimal-star {
  color: #d4a0ff; /* Match suggested path color */
}

/* Ensure color overrides highlight background if needed */
.start-word-text.highlighted-path-word {
  /* color: #fff; */ /* Optional: Change text color too */
}
.current-word-text.highlighted-path-word {
  /* color: #000; */ /* Optional: Change text color too */
}
.end-word-text.highlighted-path-word {
  /* color: #fff; */ /* Optional: Change text color too */
}

/* Style for path arrow */
.path-arrow {
  color: #777; /* Dim arrow color */
  margin: 0 0.2em; /* Add slight space around arrow */
  font-family: sans-serif; /* Ensure proper arrow display */
}

/* Style for the expansion arrow that leads to target */
.path-arrow.path-expand {
  color: #999; /* Slightly brighter than regular arrows */
  font-style: normal; /* Remove italic */
  letter-spacing: 0; /* Reset letter spacing */
  margin: 0 0.3em; /* Consistent spacing with other arrows */
}

/* Style for the leading arrow at the beginning of the path */
.path-arrow.path-leading {
  margin-right: 0.1em;
  margin-left: 0;
}

/* Remove default Vite styles (already commented out previously) */

/* --- Game Report Styling --- */
.game-report-section {
  margin-top: 20px;
  padding: 15px;
  background-color: #282c34; /* Darker background */
  border-radius: 8px;
  border: 1px solid #444a54;
  color: #abb2bf; /* Lighter text */
  text-align: left; /* Align text left */
}

.game-report {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 1px solid #444a54; /* Add a separator */
}

.game-report h4 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #61afef; /* Blueish accent for title */
  text-align: center;
  border-bottom: 1px solid #444a54;
  padding-bottom: 10px;
}

.game-report ul {
  list-style: none; /* Remove default bullets */
  padding-left: 0; /* Remove default padding */
  margin-bottom: 0; /* Remove default margin */
}

.game-report li {
  margin-bottom: 8px; /* Space between list items */
  line-height: 1.5;
  color: #b0b9c6; /* Slightly brighter text for better readability */
}

.game-report li::before { /* Optional: Custom bullet or marker */
  /* Example: content: "\2022"; color: #61afef; margin-right: 8px; */
}

.won-section h2 {
  color: #98c379; /* Green for win title */
  text-align: center;
  margin-bottom: 15px;
}

.gave-up-section h3 {
  color: #e06c75; /* Reddish for gave up title */
  text-align: center;
  margin-bottom: 15px;
}

.game-report-section p {
    margin-bottom: 10px; /* Space below path paragraphs */
}

/* Add specific class for player path text in report */
.player-path-report-text {
    font-weight: bold;
    /* Add any other styling specific to player path in report */
}

/* === Responsive Design Adjustments === */

/* Medium Screens / Tablets (e.g., < 768px) */
@media (max-width: 768px) {
  #root {
    padding: 1rem; /* Reduce overall padding */
  }

  h1 {
    font-size: 2em; /* Slightly smaller title */
  }

  h2.subtitle {
    font-size: 1em;
  }

  .options-buttons {
    grid-template-columns: repeat(2, 1fr); /* Switch to 2 columns */
    max-width: 400px; /* Adjust max-width */
    gap: 12px;
  }

  .neighbor-button {
      min-width: 100px; /* Allow slightly smaller buttons */
  }

  .graph-status-info {
    max-width: 100%; /* Allow full width */
  }

  .info-box {
      margin-left: 0;
      margin-right: 0;
  }

  /* Allow path toggle buttons to wrap */
  .path-toggle-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px; /* Add gap for wrapped buttons */
  }
  .path-toggle-container button {
      margin: 0; /* Remove horizontal margin if using gap */
  }
}

/* Small Screens / Phones (e.g., < 480px) */
@media (max-width: 480px) {
  #root {
    padding: 0.5rem; /* Further reduce padding */
  }

  h1 {
    font-size: 1.8em;
  }

  h2.subtitle {
    font-size: 0.9em;
  }

  .options-buttons {
    grid-template-columns: repeat(1, 1fr); /* Switch to 1 column */
    max-width: 250px; /* Adjust max-width for single column */
    gap: 10px;
  }

  .neighbor-button {
     width: 100%; /* Make buttons full width in single column */
     min-width: unset; /* Remove min-width */
     padding: 0.8em 1em; /* Adjust padding */
  }

  .give-up-button {
      width: 80%; /* Make give up button wider */
      margin-top: 15px;
  }

  .graph-svg-wrapper svg {
      min-height: 250px; /* Allow graph to be smaller vertically */
  }

  .game-report-section {
      padding: 10px;
  }
  .game-report h4 {
      font-size: 1.1em;
  }
  .game-report li {
      font-size: 0.9em;
  }

  .path-toggle-container button {
      font-size: 0.85em; /* Slightly smaller text */
      padding: 6px 10px;
  }

  .info-button {
      top: 10px;
      right: 10px;
      padding: 0.4em 0.8em;
  }

  .info-box {
      padding: 15px;
  }
}

/* Style for path dots (ellipsis) */
.path-dots {
  color: #999;
  letter-spacing: 1px;
  display: inline-flex;
  align-items: center;
  margin: 0 2px;
}

/* Individual dots */
.path-dot {
  margin: 0 1px;
  font-weight: bold;
}

/* Dots when player is on optimal path */
.optimal-path-dot {
  color: #ffab7a; /* Match optimal path color */
}

/* Dots when player has deviated from optimal path */
.possible-path-dot {
  color: #d4a0ff; /* Match suggested path color */
}

/* Missed optimal moves display */
.missed-optimal-moves {
  margin-top: 15px;
  padding-top: 12px;
  border-top: 1px dashed #444a54;
}

.missed-optimal-moves h5 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #b0b9c6;
  font-size: 0.95rem;
}

.missed-optimal-moves ul {
  list-style: none;
  padding-left: 0;
  margin-bottom: 0;
}

.missed-optimal-moves li {
  margin-bottom: 5px;
  font-size: 0.9rem;
}

/* Optimal moves display */
.optimal-moves-made {
  margin-top: 15px;
  padding-top: 12px;
  border-top: 1px dashed #444a54;
}

.optimal-moves-made h5 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #98c379; /* Green color for positive feedback */
  font-size: 0.95rem;
}

.optimal-moves-made ul {
  list-style: none;
  padding-left: 0;
  margin-bottom: 0;
}

.optimal-moves-made li {
  margin-bottom: 5px;
  font-size: 0.9rem;
}

.player-position {
  color: #a0c8ff; /* Light blue for position */
  font-weight: 500;
}

.player-choice {
  color: #ffd700; /* Gold for player's choice */
  font-weight: 500;
}

.optimal-choice {
  color: #ffab7a; /* Match optimal path color */
  font-weight: 500;
}
